<div class="container" *ngIf="restaurant; else skeletonLoader">
  <p-card styleClass="p-card-shadow">
    <ng-template pTemplate="header">
      <img [src]="this.restaurant.imageURL"/>
    </ng-template>
    <h2 id="restaurant-title" class="fw-700 dark-purple">{{this.restaurant.name}}</h2>
    <div id="meta-information">
      <p class="meta-line">30-40 min</p>
      <p class="meta-line">8.2 rating</p>
    </div>
    <div id="service-provider-select-container">
      <mat-button-toggle-group [vertical]="isToggleGroupVertical" name="serviceProvider" aria-label="Service Provider" (change)="handleServiceProviderChange($event)" [value]="restaurant.cheapestServiceProvider">
        <mat-button-toggle *ngFor="let serviceProvider of this.restaurant.serviceProviders" [value]="serviceProvider.serviceProviderName" >
          <span>{{serviceProvider.serviceProviderName}}</span>
          <div id="best-deal-container" *ngIf="restaurant.cheapestServiceProvider == serviceProvider.serviceProviderName">
            <span>Best Deal</span>
          </div>
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    <div class="restaurant-details-info" >
      <div class="restaurants-details-section" *ngIf="selectedServiceProvider">
        <h3 class="restaurants-details-section-header fw-600">Menu</h3>
        <div *ngFor="let category of selectedServiceProvider.menu">
          <h3>{{category.categoryName}}</h3>
          <div class="menu-item" *ngFor="let categoryItem of category.categoryItems">
            <div class="menu-item-header">
              <span>{{categoryItem.name}}</span>
              <span>${{categoryItem.amountCents / 100}}</span>
            </div>
            <div class="menu-item-body">
              <span>{{categoryItem.description}}</span>
            </div>
          </div>
        </div>
      </div>
      <hr/>
      <div class="restaurants-details-section">
        <h3 class="restaurants-details-section-header fw-600">Fees</h3>
        <div *ngIf="selectedServiceProvider">
          <div class="fee-line" *ngFor="let fee of selectedServiceProvider.fees">
            <p>{{fee.name}}</p>
            <p>${{fee.amountCents}}</p>
          </div>
          <p-button label="Order Now" id="order-now-button"></p-button>
        </div>
      </div>
    </div>
  </p-card>
</div>

<ng-template #skeletonLoader id="skeleton">
  <div class="container">
    <p-card styleClass="p-card-shadow">
      <ng-template pTemplate="header">
        <p-skeleton [shape]="'rectangle'" height="8rem"> </p-skeleton>
      </ng-template>
      <p-skeleton [shape]="'rectangle'" width="20%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
      <p-skeleton [shape]="'rectangle'" width="30%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
      <p-skeleton [shape]="'rectangle'" width="30%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
      <br/>
      <p-skeleton [shape]="'rectangle'" width="50%" height="1.8rem" styleClass="p-skeleton-margin"> </p-skeleton>
      <br/>
      <div class="restaurant-details-info" >
        <div class="restaurants-details-section">
          <p-skeleton [shape]="'rectangle'" width="25%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
          <div *ngFor="let e of [].constructor(2);">
            <div class="menu-item" *ngFor="let e of [].constructor(1)">
              <div class="menu-item-header">
                <p-skeleton [shape]="'rectangle'" width="5rem" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
                <p-skeleton [shape]="'rectangle'" width="5rem" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
              </div>
              <div class="menu-item-body">
                <p-skeleton [shape]="'rectangle'" width="33%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
                <p-skeleton [shape]="'rectangle'" width="66%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
                <p-skeleton [shape]="'rectangle'" width="99%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
              </div>
            </div>
          </div>
        </div>
        <hr/>
        <div class="restaurants-details-section">
          <p-skeleton [shape]="'rectangle'" width="25%" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
          <div>
            <div class="fee-line" *ngFor="let e of [].constructor(3)">
              <p-skeleton [shape]="'rectangle'" width="18rem" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
              <p-skeleton [shape]="'rectangle'" width="3rem" height="0.9rem" styleClass="p-skeleton-margin"> </p-skeleton>
            </div>
            <p-skeleton [shape]="'rectangle'" width="100%" height="2.5rem" styleClass="p-skeleton-margin"> </p-skeleton>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</ng-template>
